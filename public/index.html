<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>TikTok Live Chat ‡∏•‡∏≠‡∏¢‡∏Å‡∏£‡∏∞‡∏ó‡∏á</title>
    <style>
        body { background: #89a4d7; color: #eee; font-family: sans-serif; text-align: center; }
        /* Removed voice-related controls in the HTML */
        #chat { max-width:600px; margin:20px auto; overflow-y: auto; height: 350px; background:#222; padding:10px; border-radius:5px; }
        .msg { text-align: left; margin:5px 0; padding:8px; border-radius:4px; background:#333; } 
        
        input, button { margin: 5px; padding: 8px; border-radius: 5px; border: none; }
        button { background:#0a84ff; color:white; cursor:pointer; }
    </style>
</head>
<body>
    <h2>üü£ TikTok Live Chat ‡∏•‡∏≠‡∏¢‡∏Å‡∏£‡∏∞‡∏ó‡∏á üü£ </h2>

    <div>
        <input id="uniqueId" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ TikTok" />
        <button id="btn">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</button>
        </div>

    <div id="status">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</div>
    <div id="chat"></div>

<script src="/socket.io/socket.io.js"></script>
<script>
    const socket = io();

    // ----------------------------------------------------
    // ‡∏™‡πà‡∏ß‡∏ô‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
    // ----------------------------------------------------
    
    // Removed all `loadVoices`, `speechSynthesis.onvoiceschanged`, `voiceSelect`, and related code.

    document.getElementById('btn').onclick = () => {
        // No longer need to cancel speech or clear speech queues
        
        const uid = document.getElementById('uniqueId').value.trim();
        if (!uid) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ TikTok');
        document.getElementById('status').textContent = '‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...';
        
        // Clear chat box when connecting to a new live
        document.getElementById('chat').innerHTML = ''; 
        
        socket.emit('start', { uniqueId: uid });
    };

    socket.on('connected', data => {
        document.getElementById('status').textContent = '‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ roomId: ' + data.roomId;
    });

    // ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ä‡∏ó (CHAT) - ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
    socket.on('chat', data => {
        const rawComment = data.comment;
        
        // 1. ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏ä‡∏ó
        const div = document.createElement('div');
        div.className = 'msg';
        div.textContent = `${data.nickname}: ${rawComment}`;
        const chatBox = document.getElementById('chat');
        chatBox.appendChild(div);
        chatBox.scrollTop = chatBox.scrollHeight;

        // Removed all voice/speak related logic (filterEmoji, speak, mention filter)
    });

    socket.on('error', err => {
        document.getElementById('status').textContent = '‚ùå ' + err.msg;
    });
</script>
</body>
</html>
