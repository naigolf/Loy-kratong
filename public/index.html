<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>TikTok Live Chat ‡∏•‡∏≠‡∏¢‡∏Å‡∏£‡∏∞‡∏ó‡∏á</title>
    <style>
        body { background: #121212; color: #eee; font-family: 'Tahoma', sans-serif; text-align: center; margin: 0; padding: 0; }
        h2 { color: #A970FF; } /* ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á‡∏û‡∏≤‡∏™‡πÄ‡∏ó‡∏• */
        
        #status {
            margin: 15px auto;
            padding: 10px;
            background: #282828;
            border-radius: 8px;
            max-width: 600px;
            font-size: 1.1em;
            font-weight: bold;
            color: #FFA726; /* ‡∏™‡∏µ‡∏™‡πâ‡∏° */
            border: 1px solid #333;
        }

        #chat { 
            max-width: 600px; 
            margin: 20px auto; 
            overflow-y: auto; 
            height: 400px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
            background: #1E1E1E; 
            padding: 10px; 
            border-radius: 8px; 
            border: 1px solid #333;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .msg { 
            text-align: left; 
            margin: 8px 0; 
            padding: 10px 12px; 
            border-radius: 8px; 
            background: #2C2C2C; 
            display: flex; /* ‡πÉ‡∏ä‡πâ Flexbox */
            align-items: flex-start; /* ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏™‡∏∏‡∏î */
            line-height: 1.4;
        }
        
        .profile-pic {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            margin-right: 10px;
            flex-shrink: 0; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏£‡∏π‡∏õ‡∏´‡∏î */
            background-color: #444; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á fallback */
            background-size: cover;
            background-position: center;
        }

        .chat-content {
            display: flex;
            flex-direction: column;
            overflow-wrap: break-word; /* ‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥ */
            word-wrap: break-word;
            flex-grow: 1;
            min-width: 0;
        }
        
        .nickname {
            font-weight: bold;
            color: #BB86FC; /* ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á‡∏≠‡πà‡∏≠‡∏ô */
            font-size: 0.95em;
        }
        
        .comment {
            color: #E0E0E0; /* ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤‡∏≠‡πà‡∏≠‡∏ô */
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <h2>üü£ TikTok Live Chat ‡∏•‡∏≠‡∏¢‡∏Å‡∏£‡∏∞‡∏ó‡∏á üü£</h2>

    <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ -->
    <div id="status">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Server...</div>
    
    <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏ä‡∏ó -->
    <div id="chat"></div>

<!-- ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏∏‡∏î‡∏ô‡∏µ‡πâ ‚¨áÔ∏è‚¨áÔ∏è‚¨áÔ∏è -->
<!-- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å src="/socket.io/socket.io.js" ‡πÄ‡∏õ‡πá‡∏ô CDN ‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô -->
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<!-- ‚¨ÜÔ∏è‚¨ÜÔ∏è‚¨ÜÔ∏è ‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚¨ÜÔ∏è‚¨ÜÔ∏è‚¨ÜÔ∏è -->

<script>
    const socket = io(); // ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ 'io' ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤‡∏à‡∏≤‡∏Å CDN ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÅ‡∏•‡πâ‡∏ß
    const chatBox = document.getElementById('chat');
    const statusElement = document.getElementById('status');

    // ----------------------------------------------------
    // ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πà‡∏°)
    // ----------------------------------------------------
    
    console.log('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Socket.io...');

    // 1. Server ‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ TikTok ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏ï‡∏≤‡∏°‡πÑ‡∏ü‡∏•‡πå index.js)
    // ‡πÄ‡∏£‡∏≤‡πÅ‡∏Ñ‡πà‡∏£‡∏≠‡∏ü‡∏±‡∏á Event "connected"
    socket.on('connected', data => {
        console.log('Connected to TikTok:', data);
        statusElement.textContent = `‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Live ‡∏Ç‡∏≠‡∏á ${data.uniqueId} ‡πÅ‡∏•‡πâ‡∏ß (Room ID: ${data.roomId})`;
        statusElement.style.color = '#4CAF50'; // ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
    });

    // 2. ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ä‡∏ó (CHAT)
    socket.on('chat', data => {
        const rawComment = data.comment;
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á Element ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ä‡∏ó
        const div = document.createElement('div');
        div.className = 'msg';
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
        const img = document.createElement('div');
        img.className = 'profile-pic';
        img.style.backgroundImage = `url('${data.profilePictureUrl}')`;
        div.appendChild(img);
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏ä‡∏ó (‡∏ä‡∏∑‡πà‡∏≠ + ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå)
        const content = document.createElement('div');
        content.className = 'chat-content';
        
        const nickname = document.createElement('div');
        nickname.className = 'nickname';
        nickname.textContent = data.nickname;
        content.appendChild(nickname);
        
        const comment = document.createElement('div');
        comment.className = 'comment';
        comment.textContent = rawComment;
        content.appendChild(comment);
        
        div.appendChild(content);
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏ä‡∏ó
        chatBox.appendChild(div);
        chatBox.scrollTop = chatBox.scrollHeight;
    });
    
    // 3. ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "Member" (‡∏Ñ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°)
    socket.on('member', data => {
        const div = document.createElement('div');
        div.className = 'msg';
        div.style.backgroundColor = '#1A332B'; // ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏Ç‡πâ‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
        const img = document.createElement('div');
        img.className = 'profile-pic';
        img.style.backgroundImage = `url('${data.profilePictureUrl}')`;
        div.appendChild(img);
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏ä‡∏ó (‡∏ä‡∏∑‡πà‡∏≠ + ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå)
        const content = document.createElement('div');
        content.className = 'chat-content';
        
        const nickname = document.createElement('div');
        nickname.className = 'nickname';
        nickname.style.color = '#66BB6A'; // ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô
        nickname.textContent = data.nickname;
        content.appendChild(nickname);
        
        const action = document.createElement('div');
        action.className = 'comment';
        action.textContent = '‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° Live';
        action.style.fontStyle = 'italic';
        content.appendChild(action);
        
        div.appendChild(content);
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏ä‡∏ó
        chatBox.appendChild(div);
        chatBox.scrollTop = chatBox.scrollHeight;
    });

    // 4. ‡∏£‡∏±‡∏ö Error
    socket.on('error', err => {
        console.error('Socket Error:', err);
        statusElement.textContent = '‚ùå ' + err.msg;
        statusElement.style.color = '#F44336'; // ‡∏™‡∏µ‡πÅ‡∏î‡∏á
    });
    
    // 5. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Socket ‡∏Ç‡∏≤‡∏î‡∏´‡∏≤‡∏¢
    socket.on('disconnect', () => {
        statusElement.textContent = '‚ö†Ô∏è ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Server ‡∏´‡∏•‡∏∏‡∏î! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà...';
        statusElement.style.color = '#FF9800'; // ‡∏™‡∏µ‡∏™‡πâ‡∏°
    });

</script>
</body>
</html>
